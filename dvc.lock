schema: '2.0'
stages:
  generate_smiles_corpora:
    cmd: python src/rxitect/features/generate_smiles_corpora.py
    deps:
    - path: data/raw/chembl_26.sdf.gz
      md5: 8156f2eed8d99a2da750f912eabb341e
      size: 614155582
    - path: data/raw/ligand_raw.tsv
      md5: 7e6bcb0bbfd8b250d41330038576caf4
      size: 40763001
    outs:
    - path: data/processed/smiles_chembl_corpus.txt
      md5: 997d5118fd6cdb04ac531ee08bf78074
      size: 243967196
    - path: data/processed/smiles_ligand_corpus.txt
      md5: e7c34e6cfa44c8e09666b6bc4c8ffc5f
      size: 4128581
    - path: data/processed/smiles_voc.txt
      md5: afe796dc6e011113442de00c075594cb
      size: 345
  featurization:
    cmd: python src/rxitect/features/featurize_selfies.py
    deps:
    - path: data/processed/smiles_chembl_corpus.txt
      md5: 997d5118fd6cdb04ac531ee08bf78074
      size: 243967196
    - path: data/processed/smiles_ligand_corpus.txt
      md5: e7c34e6cfa44c8e09666b6bc4c8ffc5f
      size: 4128581
    outs:
    - path: data/processed/selfies_chembl_corpus.csv
      md5: 4867a47252337aa315e9ff12c60d1f48
      size: 837637828
    - path: data/processed/selfies_ligand_corpus.csv
      md5: 124518d252db89ce389293e8d41d14e5
      size: 14569683
    - path: data/processed/selfies_voc.txt
      md5: 9976764674593394b756ef6e5c459080
      size: 552
  pretrain_selfies_lstm:
    cmd: python src/rxitect/training/pretrain_selfies_rnn.py
    deps:
    - path: data/processed/selfies_chembl_corpus.csv
      md5: 4867a47252337aa315e9ff12c60d1f48
      size: 837637828
    - path: data/processed/selfies_ligand_corpus.csv
      md5: 124518d252db89ce389293e8d41d14e5
      size: 14569683
    - path: data/processed/selfies_voc.txt
      md5: 9976764674593394b756ef6e5c459080
      size: 552
    outs:
    - path: models/pretrained_selfies_rnn.ckpt
      md5: 8a89a8535204053023c237bd43c5fe8e
      size: 66881020
  fine_tune_selfies_lstm:
    cmd: python src/rxitect/training/fine_tune_selfies_rnn.py
    deps:
    - path: data/processed/selfies_voc.txt
      md5: 9976764674593394b756ef6e5c459080
      size: 552
    - path: models/pretrained_selfies_rnn.ckpt
      md5: 8a89a8535204053023c237bd43c5fe8e
      size: 66881020
    outs:
    - path: models/fine_tuned_selfies_rnn.ckpt
      md5: eb5e51359987e2dded5e24067b57b24e
      size: 66882459
  train_predictors:
    cmd: python src/rxitect/training/train_predictors.py
    deps:
    - path: data/raw/ligand_raw.tsv
      md5: 7e6bcb0bbfd8b250d41330038576caf4
      size: 40763001
    outs:
    - path: models/RF_REG_CHEMBL226.pkg
      md5: bd9130dbd4564e6278f27fd2f5a5f4dd
      size: 84989931
    - path: models/RF_REG_CHEMBL240.pkg
      md5: d092ae2d2514bf7c6df467fd7f2aeceb
      size: 135286055
    - path: models/RF_REG_CHEMBL251.pkg
      md5: a8668f03f8d2c50d7a7c6bc5d7e61f87
      size: 92714274
